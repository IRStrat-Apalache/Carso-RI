{% extends 'layouts/base.html' %}
{% load static i18n %}

{% block otherstyles %}
    <link rel="stylesheet" href="{% static 'css/owl.carousel.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/owl.theme.default.css' %}">
    <link rel="stylesheet" href="{% static 'css/jquery-ui.css' %}">
    <link rel="stylesheet" href="{% static 'css/flexslider.css' %}{{ css_js_version }}">
    <link rel="stylesheet" href="{% static 'css/tabsinver.css' %}">
    <link rel="stylesheet" href="{% static 'css/amcharts.css' %}">
    <style>

        .investor-card {
            transition: transform 0.2s, box-shadow 0.2s;
            background: #fff;
        }

        .investor-card:hover {
            transform: translateY(-5px) scale(1.03);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
        }

        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4);
            opacity: 0;
            transition: opacity 0.2s;
        }

        .investor-card:hover .overlay {
            opacity: 1;
        }

        .owl-carousel .owl-dots {
            flex-grow: 1; /* Los puntos ocupan el espacio central */
            display: flex;
            justify-content: center;
        }

        .owl-carousel .owl-dot {
            display: inline-block;
            margin: 0 5px;
            background-color: grey !important;
            border-radius: 50%;
            width: 10px;
            height: 10px;
        }

        .owl-carousel .owl-dot.active {
            background-color: #59A971 !important;
        }


        .owl-carousel .owl-dot:focus {
            outline: none;
        }

        .owl-carousel1 {
            overflow: visible !important;
            margin: 10px 0;
        }

        /* Estilos para el efecto hover de las imágenes */
        .image-hover-container {
            position: relative;
            display: inline-block;
            width: 100%;
        }

        .image-hover-container img {
            transition: opacity 0.3s ease;
            width: 100%;
            height: auto;
        }

        .hover-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(35, 53, 107, 0.95);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: left;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
            font-weight: 500;
            font-size: 13px;
            max-width: 90%;
            min-width: 80%;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .hover-title {
            font-size: 18px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 15px;
            color: #59A971;
            border-bottom: 2px solid #59A971;
            padding-bottom: 8px;
        }

        .hover-list {
            list-style: none;
            padding: 0;
            margin: 0 0 15px 0;
        }

        .hover-list li {
            padding: 4px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            font-size: 15px;
        }

        .hover-list li:last-child {
            border-bottom: none;
        }

        .hover-download-btn {
            background-color: #59A971;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-weight: bold;
            font-size: 12px;
            width: 100%;
            cursor: pointer;
            transition: background-color 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .hover-download-btn:hover {
            background-color: #4a8a5f;
        }

        .image-hover-container:hover img {
            opacity: 0.2;
        }

         .image-hover-container:hover .hover-content {
             opacity: 1;
         }

         /* Estilos para las métricas interactivas */
         .metric-card {
             background: white;
             border-radius: 15px;
             padding: 30px 25px;
             text-align: center;
             box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
             transition: all 0.3s ease;
             cursor: pointer;
             position: relative;
             overflow: hidden;
             border: 2px solid transparent;
         }

         .metric-card:hover {
             transform: translateY(-10px);
             box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
             border-color: #59A971;
         }

         .metric-card::before {
             content: '';
             position: absolute;
             top: 0;
             left: -100%;
             width: 100%;
             height: 100%;
             background: linear-gradient(90deg, transparent, rgba(89, 169, 113, 0.1), transparent);
             transition: left 0.5s;
         }

         .metric-card:hover::before {
             left: 100%;
         }

         .metric-icon {
             font-size: 48px;
             color: #59A971;
             margin-bottom: 20px;
             transition: all 0.3s ease;
         }

         .metric-card:hover .metric-icon {
             transform: scale(1.1);
             color: #4a8a5f;
         }

         .metric-content {
             margin-bottom: 20px;
         }

         .metric-number {
             font-size: 48px;
             font-weight: bold;
             color: #23356B;
             margin: 0;
             transition: all 0.3s ease;
         }

         .metric-card:hover .metric-number {
             color: #59A971;
             transform: scale(1.05);
         }

         .metric-label {
             font-size: 18px;
             font-weight: 600;
             color: #333;
             margin: 10px 0 5px 0;
         }

         .metric-unit {
             font-size: 14px;
             color: #666;
             font-weight: 500;
             margin: 0;
         }

         .metric-description {
             opacity: 0;
             max-height: 0;
             overflow: hidden;
             transition: all 0.3s ease;
             background: #f8f9fa;
             border-radius: 8px;
             padding: 0;
             margin-top: 15px;
         }

         .metric-card:hover .metric-description {
             opacity: 1;
             max-height: 100px;
             padding: 15px;
         }

         .metric-description p {
             margin: 0;
             font-size: 14px;
             color: #555;
             line-height: 1.4;
         }

         /* Animación de contador */
         @keyframes countUp {
             from { opacity: 0; transform: translateY(20px); }
             to { opacity: 1; transform: translateY(0); }
         }

         .metric-number.animating {
             animation: countUp 0.6s ease-out;
         }

        .owl-carousel1 .owl-item {
            /* border: 2px green solid; */
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 10px;
            /* width: 350px !important; */
            height: 100% !important;
            transition: .5s ease;
        }

        .owl-carousel1 .owl-item:hover {
            transform: translateY(-7px);
        }
    </style>
{% endblock %}



{% block content %}


    <section id="contenido" class="s-block pt-0 mt-5">
        <div class="container-fluid container-relative">
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="widget text-justify">
                        <select class="form-control" id="select_tabla">
                            <option value="t1" selected>Desempeño del Portafolio</option>
                            <option value="t2">Situación Financiera</option>
                            <option value="t3">Estado de Resultados</option>

                        </select>
                        <br>
                        <div id="t1" class="d-none tablas">
                            <div class="table-responsive">
                                <table class="table key_value_responsive table-bordered table-striped bc-blue val-toRight">
                                    <thead>
                                    <tr>
                                        <th class="">Desempeño del Portafolio (Miles de
                                            dólares)</th>
                                        <th style="width: 125px;">2024</th>
                                        <th style="width: 125px;">2023</th>
                                        <!--<th style="width: 125px;">2017</th>-->
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td data-content="Categoria">Capital comprometido</td>
                                        <td data-content="2024">$1,174,280.1</td>
                                        <td data-content="2023">$1,113,701.4</td>
                                        <!--<td data-content="2017">832,071</td>-->
                                        <!---<td>352,482</td>--->
                                    </tr>
                                    <tr>
                                        <td data-content="Categoria">Capital aportado</td>
                                        <td data-content="2024">$1,055,842.2</td>
                                        <td data-content="2023">$1,002,622.1</td>
                                        <!--<td data-content="2017">718,325</td>-->
                                        <!---<td>305,039</td>--->
                                    </tr>
                                    <tr>
                                        <td data-content="Categoria">Capital por aportar</td>
                                        <td data-content="2024">$101,457.2</td>
                                        <td data-content="2023">$103,636.4</td>
                                        <!--<td data-content="2017">718,325</td>-->
                                        <!---<td>305,039</td>--->
                                    </tr>
                                    <tr>
                                        <td data-content="Categoria">TIR histórica US dólares</td>
                                        <td data-content="2024">4.3%</td>
                                        <td data-content="2023">4.8%</td>
                                        <!--<td data-content="2017">725,138</td>-->
                                        <!---<td>307,870</td>--->
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div id="t2" class="d-none tablas">
                            <div class="table-responsive">
                                <table class="table key_value_responsive table-bordered table-striped bc-blue val-toRight">
                                    <thead>
                                    <tr>
                                        <th class="">Situación Financiera (Millones de
                                            pesos)
                                        </th>
                                        <th style="width: 125px;">2024</th>
                                        <th style="width: 125px;">2023</th>

                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td data-content="Categoria">Efectivo y equivalentes de efectivo</td>
                                        <td data-content="2024">$492.8</td>
                                        <td data-content="2023">$333.1</td>
                                        <!--<td data-content="2017">11,306,957</td>-->
                                        <!---<td>4,918,734</td>--->
                                    </tr>

                                    <tr>
                                        <td data-content="Categoria">Cuentas por cobrar</td>
                                        <td data-content="2024">$195.2</td>
                                        <td data-content="2023">$2.1</td>
                                        <!--<td data-content="2017">1,568,703</td>-->
                                        <!---<td>278,632</td>--->
                                    </tr>

                                    <tr>
                                        <td data-content="Categoria">Activo Total</td>
                                        <td data-content="2024">$812.5</td>
                                        <td data-content="2023">$696.1</td>
                                        <!--<td data-content="2017">2,731,028</td>-->
                                        <!---<td>758,877</td>--->
                                    </tr>

                                    <tr>
                                        <td data-content="Categoria">Pasivo Total</td>
                                        <td data-content="2024">$83.1</td>
                                        <td data-content="2023">$62.8</td>
                                        <!--<td data-content="2017">2,836,290</td>-->
                                    </tr>

                                    <tr>
                                        <td data-content="Categoria">Capital contable</td>
                                        <td data-content="2024">$729.4</td>
                                        <td data-content="2023">$633.3</td>
                                        <!--<td data-content="2017">8,470,667</td>-->
                                    </tr>

                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div id="t3" class="d-none tablas">
                            <div class="table-responsive">
                                <table class="table key_value_responsive table-bordered table-striped bc-blue val-toRight">
                                    <thead>
                                    <tr>
                                        <th data-content="Categoria">Estado de Resultados (Millones de pesos)</th>
                                        <th style="width: 125px;">2024</th>
                                        <th style="width: 125px;">2023</th>
                                        <!--<th style="width: 125px;">2017</th>-->
                                        <!---<th class="col-md-2 col-lg-2 col-sm-2 col-xs-2">2015</th>--->
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td data-content="Categoria">Ingresos por servicios</td>
                                        <td data-content="2024">$98.7</td>
                                        <td data-content="2023">$89.1</td>
                                        <!--<td data-content="2017">87.15%</td>--->
                                        <!---<td>87.34%</td>--->
                                    </tr>
<tr>
                                        <td data-content="Categoria">Cambios netos en el valor razonable de instrumentos financieros razonables</td>
                                        <td data-content="2024">$-22</td>
                                        <td data-content="2023">$-40</td>
                                        <!--<td data-content="2017">87.15%</td>--->
                                        <!---<td>87.34%</td>--->
                                    </tr>
                                    <tr>
                                        <td data-content="Categoria">Otros ingresos</td>
                                        <td data-content="2024">$4.8</td>
                                        <td data-content="2023">$9.1</td>
                                        <!--<td data-content="2017">87.15%</td>--->
                                        <!---<td>87.34%</td>--->
                                    </tr>
                                    <tr>
                                        <td data-content="Categoria">Utilidad de operación</td>
                                        <td data-content="2024">$-5.8</td>
                                        <td data-content="2023">$-20.5</td>
                                        <!--<td data-content="2017">87.15%</td>--->
                                        <!---<td>87.34%</td>--->
                                    </tr>
                                    <tr>
                                        <td data-content="Categoria">Gastos de administración</td>
                                        <td data-content="2024">$-87.2</td>
                                        <td data-content="2023">$-78.6</td>
                                        <!--<td data-content="2017">87.15%</td>--->
                                        <!---<td>87.34%</td>--->
                                    </tr>
                                    <tr>
                                        <td data-content="Categoria">Resultado integral de financiamiento</td>
                                        <td data-content="2024">$97.4</td>
                                        <td data-content="2023">$-19</td>
                                        <!--<td data-content="2017">87.15%</td>--->
                                        <!---<td>87.34%</td>--->
                                    </tr>
                                    <tr>
                                        <td data-content="Categoria">Utilidad neta del ejercicio</td>
                                        <td data-content="2024">$96</td>
                                        <td data-content="2023">$-25.5</td>
                                        <!--<td data-content="2017">78.10%</td>-->
                                        <!---<td>72.33%</td>--->
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div id="t4" class="d-none tablas">
                            <table class="table key_value_responsive table-bordered table-striped bc-blue val-toRight">
                                <thead>
                                <tr>
                                    <th>Flujo de Efectivo (Miles de pesos)</th>
                                    <th style="width: 125px;">2024</th>
                                    <th style="width: 125px;">2023</th>
                                    <th style="width: 125px;">2022</th>
                                    <!--<th style="width: 125px;">2017</th>-->

                                    <!---<th class="col-md-2 col-lg-2 col-sm-2 col-xs-2">2015</th>--->
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td data-content="Categoria">Flujos de efectivo netos procedentes de (utilizados en)
                                        actividades de operación
                                    </td>
                                    <td data-content="2024">$806,315</td>
                                    <td data-content="2023">$1,289,753</td>
                                    <td data-content="2022">$998,010</td>
                                    <!--<td data-content="2017">8.17</td>-->
                                    <!---<td>2.96</td>--->
                                </tr>

                                <tr>
                                    <td data-content="Categoria">Flujos de efectivo generados por (utilizados en)
                                        actividades de inversión
                                    </td>
                                    <td data-content="2024">-$697,117</td>
                                    <td data-content="2023">-$475,698</td>
                                    <td data-content="2022">-$601,266</td>
                                    <!--<td data-content="2017">0.55</td>-->
                                    <!---<td>0.46</td>--->
                                </tr>

                                <tr>
                                    <td data-content="Categoria">Flujos de efectivo utilizados en actividades de
                                        financiamiento
                                    </td>
                                    <td data-content="2024">-$125,387</td>
                                    <td data-content="2023">-$841,407</td>
                                    <td data-content="2022">-$1,073,435</td>
                                    <!--<td data-content="2017">0.33</td>-->
                                    <!---<td>0.20</td>--->
                                </tr>
                                <tr>
                                    <td data-content="Categoria">Efectivo y equivalentes<sup>(1)</sup></td>
                                    <td data-content="2024">$732,009</td>
                                    <td data-content="2023">$565,692</td>
                                    <td data-content="2022">$672,638</td>
                                    <!--<td data-content="2017">0.24</td>-->
                                    <!---<td>0.15</td>--->
                                </tr>
                                </tbody>
                            </table>

                        </div>

                        <div id="t5" class="d-none tablas">
                            <div class="table-responsive">
                                <table class="table key_value_responsive table-bordered table-striped bc-blue val-toRight">
                                    <thead>
                                    <tr>
                                        <th>Indicadores Operativos</th>
                                        <th style="width: 125px;">2024</th>
                                        <th style="width: 125px;">2023</th>
                                        <th style="width: 125px;">2022</th>


                                        <!---<th class="col-md-2 col-lg-2 col-sm-2 col-xs-2">2015</th>--->
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td data-content="Categoria">Número de propiedades</td>
                                        <td data-content="2024">117</td>
                                        <td data-content="2023">106</td>
                                        <td data-content="2022">60</td>
                                        <!--<td data-content="2017">43</td>-->
                                    </tr>

                                    <tr>
                                        <td data-content="Categoria">Área Bruta Rentable (ABR) m<sup>2</sup></td>
                                        <td data-content="2024">1,871,530</td>
                                        <td data-content="2023">1,652,673</td>
                                        <td data-content="2022">818,864</td>
                                        <!--<td data-content="2017">504,534</td>-->
                                    </tr>

                                    <tr>
                                        <td data-content="Categoria">Tasa de ocupación</td>
                                        <td data-content="2024">96.20%</td>
                                        <td data-content="2023">96.30%</td>
                                        <td data-content="2022">90.90%</td>
                                        <!--<td data-content="2017">96.60%</td>-->
                                    </tr>

                                    <tr>
                                        <td data-content="Categoria">Renta promedio / m<sup>2</sup> Oficinas
                                            corporativas (USD$)
                                        </td>
                                        <td data-content="2024">19.4</td>
                                        <td data-content="2023">20.8</td>
                                        <td data-content="2022">20.3</td>
                                        <!--<td data-content="2017">18.5</td>-->

                                    </tr>

                                    <tr>
                                        <td data-content="Categoria">Renta promedio / m<sup>2</sup> Oficinas operativas
                                            (USD$)
                                        </td>
                                        <td data-content="2024">16.1</td>
                                        <td data-content="2023">16.0</td>
                                        <td data-content="2022">15.1</td>
                                        <!--<td data-content="2017">12.9</td>-->
                                    </tr>

                                    <tr>
                                        <td data-content="Categoria">Renta promedio / m<sup>2</sup> Oficinas industrial
                                            (USD$)
                                        </td>
                                        <td data-content="2024">5.9</td>
                                        <td data-content="2022">5.5</td>
                                        <td data-content="2022">5.0</td>
                                        <!--<td data-content="2017">4.2</td>-->
                                    </tr>

                                    <tr>
                                        <td data-content="Categoria">Renta promedio / m<sup>2</sup> Oficinas comercial
                                            (USD$)
                                        </td>
                                        <td data-content="2024">7.7</td>
                                        <td data-content="2023">8.9</td>
                                        <td data-content="2022">7.3</td>
                                        <!--<td data-content="2017">6.9</td>-->
                                    </tr>

                                    <tr>
                                        <td data-content="Categoria"> Inversiones de capital (miles de pesos)</td>
                                        <td data-content="2024">130,000</td>
                                        <td data-content="2023">57,600</td>
                                        <td data-content="2022">41,993</td>
                                        <!--<td data-content="2018">&nbsp;</td>-->
                                        <!--<td data-content="2017">&nbsp;</td>-->
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <div class="row s-block pt-3">
                <div class="col-12">
                    <a rel="noreferrer"
                       href=""
                       class="btn btn-primary btn-lg pull-right" target="_blank"><i class="fa fa-download"></i>
                        Descargar en formato XLS</a>
                </div>
            </div>
        </div>
    </section>




{% endblock %}

{% block otherscripts %}
    <script src="{% static 'js/amCharts/amcharts.js' %}"></script>
    <script src="{% static 'js/amCharts/serial.js' %}"></script>
    <script src="{% static 'js/amCharts/pie.js' %}"></script>
    <script src="{% static 'js/amCharts/amstock.js' %}"></script>
    <script src="{% static 'js/jquery-ui-1.11.0.min.js' %}"></script>
    <script src="{% static 'js/isotope.pkgd.min.js' %}"></script>
    <script src="{% static 'js/tabsinv.js' %}{{ css_js_version }}"></script>

    <script>
        $(document).ready(function () {
            // URLs de descarga para cada tabla
            var downloadUrls = {
                't1': '',
                't2': '',
                't3': '',
                't4': ''
            };

            // Nombres de archivos para cada tabla
            var fileNames = {
                't1': 'Indicadores Operativos',
                't2': 'Situación Financiera',
                't3': 'Estado de Resultados',
                't4': 'Flujo de Efectivo'
            };

            var divT = $('#select_tabla').val();
            $('#' + divT).removeClass('d-none');
            
            // Actualizar el botón de descarga inicial
            updateDownloadButton(divT);

            $('#select_tabla').change(function (event) {
                var selectedTable = $(this).val();
                $('div.tablas[id^="t"][class!="d-none"]').addClass('d-none');
                $('#' + selectedTable).removeClass('d-none');
                
                // Actualizar el botón de descarga
                updateDownloadButton(selectedTable);
            });

            function updateDownloadButton(tableId) {
                var downloadButton = $('.btn-primary');
                var newUrl = downloadUrls[tableId];
                var fileName = fileNames[tableId];
                
                if (newUrl) {
                    downloadButton.attr('href', newUrl);
                    downloadButton.html('<i class="fa fa-download"></i> Descargar ' + fileName + ' en formato XLS');
                }
            }
        });
    </script>
{% endblock %}
